@using ZauberCMS.Components.Editors.Models
@using ZauberCMS.Components.Editors.Settings
@implements ZauberCMS.Core.Content.Interfaces.IContentProperty
@inherits ListPropertyBaseComponent

@if (SettingsModel.MaxAmount > 0)
{
    <div>
        <RadzenText TextStyle="TextStyle.Caption">Max allowed: @SettingsModel.MaxAmount</RadzenText>
    </div>
}
<RadzenDropDown @ref="DropDown"
                Data="@SettingsModel.Items"
                @bind-Value="@SelectedValues"
                Change="@(args => OnChange(true))"
                TextProperty="Name"
                ValueProperty="Value"
                Multiple="true" AllowClear="true" Placeholder="Select items" Chips="true" Style="width: 100%;"/>

@code {
    //MaxSelectedLabels="" 
    public string Name { get; set; } = "Dropdown List";
    public string Alias { get; set; } = "ZauberCMS.DropdownList";
    public string Icon { get; set; } = "arrow_drop_down";
    public string Description { get; set; } = "Dropdown list using manual or custom data, for multiple select items";
    public Type? SettingsComponent { get; set; } = typeof(ListPropertySettings);
    
    private RadzenDropDown<IEnumerable<string>>? DropDown { get; set; }
    
    protected override void OnAfterRender(bool firstRender)
    {
        base.OnAfterRender(firstRender);
        if (firstRender && DropDown != null && SettingsModel.MaxAmount > 0)
        {
            DropDown.MaxSelectedLabels = SettingsModel.MaxAmount;
        }
    }

}